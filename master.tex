%%% master.tex --- 
%% \revision$Header: /Users/bob/SourceCode/Notes/ocaml-hacker.tex,v 0.0 2011/10/23 02:58:53 bob Exp$




\documentclass[svgnames,12pt,a4paper]{report}
\usepackage[latin9]{inputenc}
\usepackage[letterpaper]{geometry}
\geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}


\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{float}
\usepackage{array}
\usepackage{tikz}
\usepackage{enumerate}
\usepackage{lmodern}
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\usepackage{hyperref}
\usepackage{listings}
\usepackage{fancyvrb}
\usepackage{wasysym}
\usepackage[online]{suthesis-2e}
\usepackage{todonotes}
\usepackage{caption}
\usepackage{minted}


\usepackage{setspace}

\definecolor{MyDarkBlue}{rgb}{0,0.08,0.45}
\definecolor{lightgray}{rgb}{0.9,0.9,0.9}
\definecolor{lightlightgray}{rgb}{0.98,0.98,0.98}


%% begin listing configuration 
\lstset{
  basicstyle=\footnotesize\ttfamily,
  numberstyle=\tiny,
  % numbers=left,
  stepnumber=5,
  numbersep=5pt,
  tabsize=2,
  extendedchars=true,
  breaklines=true,
  keywordstyle=\color{blue}\bfseries, % to do
  stringstyle=\color{orange}\ttfamily, %to do
  identifierstyle=\color{teal},
  showstringspaces=true,
  showspaces=false,
  showtabs=false,
  % xleftmargin=17pt,
  framexrightmargin=5pt,
  framexbottommargin=4pt,
  % backgroundcolor=\color{lightgray}, % to do
  commentstyle=\color{red},% todo 
  % frame=lines,
  frame=bottom,
  backgroundcolor=\color{lightlightgray},
  framerule=1pt,
  % emph={square,root},
  % emphstyle=\underbar,
  %% language={[Objective]Caml},
}
\DeclareCaptionFont{white}{\color{white}}
\DeclareCaptionFormat{listing}{\colorbox[cmyk]{0.43, 0.35, 0.35,0.01}{\parbox{\textwidth}{\hspace{15pt}#1#2#3}}}
\captionsetup[lstlisting]{format=listing,labelfont=white,textfont=white, singlelinecheck=false, margin=0pt, font={bf,footnotesize}}

%% end


\makeatletter

\makeatother


% \newenvironment{ocamlcode}{\Verbatim[fomartcom=\color{blue}]}{\endVerbatim}
% New commands serve as shorthand for frequently used command combinations.
% \newcommand{\ind}[1]{\mathbf{1}\left(#1\right)}
% \newcommand{\bx}{\mathbf{x}}
% \newcommand{\E}{\mathbf{E}}
% \DefineVerbatimEnvironment{ocamlcode}{Verbatim}{formatcom=\color{red},fontsize=\scriptsize}
% \DefineVerbatimEnvironment{bluetext}{Verbatim}{formatcom=\color{MyDarkBlue},fontsize=\scriptsize}
% \DefineVerbatimEnvironment{ocamlcode}{Verbatim}{formatcom=\color{blue},fontsize=\scriptsize}
% \lstnewenvironment{ocamlcode}
% {\singlespacing}{}


\usepackage{etoolbox}

\setlength\partopsep{-\topsep}
\addtolength\partopsep{-\parskip}
\addtolength\partopsep{0.5cm}


%% \AtBeginEnvironment{minted}{\fontsize{10}{10}\selectfont}


%% \AtBeginEnvironment{bluetext}{\singlespacing%
%%     \fontsize{10}{10}\selectfont}


%% \AtBeginEnvironment{inputminted}{\singlespacing%
%%     \fontsize{10}{10}\selectfont}


\newcommand{\ChangeLine}[1]{%
\ifodd\value{FancyVerbLine}%
\textcolor{red}{#1}\else\textcolor{blue}{#1}\fi}


\newminted{ocaml}{fontsize=\scriptsize}
%% \newinputminted{ocaml}

%% \newminted[ocamlcode]{ocaml}{}
%% \newminted[ocamlcode]{ocaml}{}
%% \newminted[smallcode]{ocaml}{}
%% \newminted[ocamlcode]{ocaml}{frame=single,
%%  formatcom=\renewcommand{\FancyVerbFormatLine}{\ChangeLine}}


\lstnewenvironment{bluetext}
{\singlespacing\lstset{backgroundcolor=\color{lightgray}}}{}

\DefineVerbatimEnvironment{alternate}{Verbatim}%
{formatcom=\renewcommand{\FancyVerbFormatLine}{\ChangeLine},%
fontsize=\scriptsize,frame=lines}{}

% \def\dashfill{\cleaders\hbox{-}\hfill}

\begin{document}



\setcounter{tocdepth}{4}
\title{OCaml Hacks}
\author{Hongbo Zhang}

\maketitle
\prefacesection{Preface}
\begin{quotation}
  \textit{
This is a book about hacking in ocaml.
It's assumed that you already understand the underlying theory. Happy hacking
Most parts are filled with code blocks, I will add some comments in the future. Still a book in progress. Don't distribute it.}

\smiley
\end{quotation}
\prefacesection{Acknowledgements}
\todo{write later}



\newpage

\tableofcontents
\listoftodos
\vspace*{1cm}

\newpage



\newpage 
\chapter{eco-system}

% ocamlbuild

\input{./ob.tex}

\input{./godi.tex}

\input{./of.tex}

\input{./toplevel.tex}

% section svn
\input{svn/git.tex}

\chapter{lexing}
\section{lexing-ulex-ocamllex}
\label{sec:parsing-lexing-1}
\input{./lex.tex}
\input{./ocaml-lex.tex}

\chapter{parsing}
\section{ocamlyacc or menhir}
\label{sec:ocamlyacc}
\input{./ocaml-yacc.tex}


\chapter{Camlp4}
\label{sec:camlp4}
Camlp4 stands for preprocess-pretty-printer for \verb|OCaml|, it's
extremely powerful and  hard to grasp as well.


  \input{./camlp4/intro}
  \input{./camlp4/tutorial}
  \input{./camlp4/ast_transform.tex}
  \input{./camlp4/revised_syntax}
  \input{./camlp4/experiment}
  \input{./camlp4/extensible_parser}
  \input{./camlp4/jake_blog}
  \input{./camlp4/links}


\chapter{practical parts}
\input{./library/batteries}
\input{./library/bolt}
\input{./library/mikmatch}
\input{./library/pa-do}
\input{./library/num}
\input{./library/caml-inspect}
\input{./library/ocaml-graph}
\input{./library/monad}
\input{./library/bigarrary}
\input{./library/sexplib}
\input{./library/bin-prot}
\input{./library/fieldslib}
\input{./library/variantslib}
\input{./library/delimcc}
\input{./library/shcaml}
\input{./library/deriving}
\section{Modules}
\input{./module-lang}

\chapter{Runtime}
\label{sec:runtime}
\input{./runtime/runtime.tex}

\chapter{GC}
\label{sec:gc}
\input{./runtime/gc.tex}


\chapter{Object-oriented}
\include{oo/oo}

\todo{Write later}

\chapter{complex language features}
\label{sec:compl-lang-feat}

\input{./lang/stream}
\input{./lang/gadt}
\input{./lang/module}
\input{./lang/phantom}
\input{./lang/posit}
\input{./lang/private}
\input{./lang/subtyping}
\input{./lang/explicit_type}

\section{The module Language}
\label{sec:module-language}


\chapter{subtle bugs}
\label{sec:subtle-bugs}
\input{bugs/reload}

\chapter{interoperating with C}
\label{sec:inter-with-c}
\todo{Write later}
\input{./c/M4.tex}


\chapter{Book}
\input{./books/developing_application_with_ocaml}
\input{./books/ocaml_for_scientists}
\input{./books/caltech_ocaml}
\input{./books/the_functional_approach_to_programming}
\input{./books/practical_ocaml}
\input{./books/hol_light}
\input{./books/unix_system_programming_in_ocaml}
\input{./books/practical_ocaml}
\input{trival_tricks}
\input{blogs}

\end{document}


%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "master"
%%% End: 
